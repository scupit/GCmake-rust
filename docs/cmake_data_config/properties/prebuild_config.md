# prebuild_config

> This page describes the [prebuild_config](properties_list.md#prebuild_config) configuration property in
> cmake_data.yaml.

For an explanation of pre-build scripts themselves, see the dedicated
[pre-build scripts page](../../pre_build_scripts.md).

## Use cases

Use the `prebuild_config` property to:

- Configure linked libraries and build configuration options for the pre-build script *if it is an executable*.
- Make generated code files propertly work as part of the build.

## Properties

> **All build configuration properties are optional.**

| Property | Supported pre-build type | Description |
| -------- | ------------------------ | ----------- |
| `link` | *Executable* only | Same as the executable output [*link* property](output.md#link), specifies a list of libraries to link to the pre-build script. |
| `build_config` | *Executable* only | Same as the executable output [*build_config* property](output.md#link), specifies additional build configuration options for the pre-build script. |
| `generated_code` | All | Specifies the list of code files the pre-build script will produce which should be included in the project's main build process. |

### link

See the [output link](output.md#link) property. This works the same way.

### build_config

See the output [build_config property](output.md#build_config). This works the same way.

### generated_code

> *Optional* `List<String>`

A pre-build script which generates code files to be used by the build must explicitly specify
which code files it generates, so that the build is able to track those files even if they don't
currently exist. **NOTE** that only code files needed to build the project must be specified.
Other files like json, txt, etc. which aren't needed by your projects should not be listed. GCMake
will output an error if they are.

**Files must be specified without the *src/MY_INCLUDE_PREFIX* or *include/MY_INCLUDE_PREFIX* they would normally have.**
GCMake already has knowledge of the project's include prefix and source/header directories, so this eliminates
unnecessary path duplication.

For example, specifying these generated code files:

``` yaml
include_prefix: MY_INCLUDE_PREFIX
prebuild_config:
  generated_code:
    - my-source-file.cpp
    - my-header-file.hpp
    - some/nested/another-source-file.cpp2
```

will tell CMake to wait until these files are generated by the pre-build script before fully building
the project:

- src/MY_INCLUDE_PREFIX/my-source-file.cpp
- include/MY_INCLUDE_PREFIX/my-header-file.hpp
- src/MY_INCLUDE_PREFIX/some/nested/another

## Full Example

``` yaml
predefined_dependencies:
  fmt:
    git_tag: "9.1.0"
prebuild_config:
  link:
    - fmt::fmt
  defines:
    - NOICE="This is defined for the pre-build only."
  generated_code:
    - my-source-file.cpp
    - my-header-file.hpp
    - my-template-impl.tpp
    - a-cppfront-file.cpp2
    - deeply/nested/source-file.cpp
    - deeply/nested/cppfront-file.cpp2
    - deeply/nested/header-file.hpp
    - deeply/nested/template-impl-file.tpp
```
